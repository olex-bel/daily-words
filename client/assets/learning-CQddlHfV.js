const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SessionSummary-vv0fqkLt.js","assets/chunk-WWGJGFF6-8djDTm2d.js","assets/index-DKhaMfTd.js","assets/supabase-B_K81v3k.js","assets/date-C38ZJWcO.js","assets/ViewCenter-CjFryxq8.js","assets/Surface-Br18wGdW.js","assets/useTranslation-YS5tDbaE.js"])))=>i.map(i=>d[i]);
import{a as x,p as e,B as E,z as R,w as S,x as C,C as L}from"./chunk-WWGJGFF6-8djDTm2d.js";import{u as P,R as $,a as I,b,c as v,d as F,e as A,g as B,M as T}from"./index-DKhaMfTd.js";import{u as f}from"./useTranslation-YS5tDbaE.js";import"./supabase-B_K81v3k.js";import{S as y}from"./Surface-Br18wGdW.js";import{V as _}from"./ViewCenter-CjFryxq8.js";const W="modulepreload",D=function(t){return"/daily-words/"+t},j={},z=function(s,n,r){let l=Promise.resolve();if(n&&n.length>0){let d=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");l=d(n.map(c=>{if(c=D(c),c in j)return;j[c]=!0;const u=c.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":W,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((N,k)=>{h.addEventListener("load",N),h.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return l.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};function M(){const{t}=f(),[s,n]=x.useState(!1),[r,l]=x.useState(null);return{submitRating:async(a,o,d)=>{if(!s){n(!0),l(null);try{await P(a,o),d()}catch{l(t("learning.updateError.message"))}finally{n(!1)}}},isPending:s,error:r,setError:l}}const O={noun:"podst. meno",verb:"sloveso",adj:"príd. meno",particle:"častica",prep:"predložka"};function U({grammar:t}){const s=e.jsx("span",{className:"text-ink-faint",children:"•"});return e.jsxs("div",{className:"flex items-center gap-2 text-ink-light",children:[e.jsx("span",{className:"opacity-50 italic",children:O[t.pos]||t.pos}),t.pos==="verb"&&e.jsxs(e.Fragment,{children:[s,e.jsx("span",{className:"text-ink-faint",children:t.aspect==="pf"?"dok.":"ned."})]}),t.pos==="noun"&&e.jsxs(e.Fragment,{children:[s,e.jsx("span",{className:"text-sky-600",children:t.gender}),t.genitive&&e.jsxs(e.Fragment,{children:[s,e.jsxs("span",{className:"lowercase opacity-70",children:["G: -",t.genitive.slice(-2)]})]}),t.plural&&e.jsxs(e.Fragment,{children:[s,e.jsxs("span",{className:"lowercase opacity-70",children:["PL: -",t.plural.slice(-2)]})]})]})]})}const g={m:{bg:"bg-word-masculine",text:"text-word-masculine",shadow:"shadow-word-masculine",border:"border-word-masculine"},f:{bg:"bg-word-feminine",text:"text-word-feminine",shadow:"shadow-word-feminine",border:"border-word-feminine"},n:{bg:"bg-word-neutral",text:"text-word-neutral",shadow:"shadow-word-neutral",border:"border-word-neutral"},action:{bg:"bg-word-action",text:"text-word-action",shadow:"shadow-word-action",border:"border-word-action"},default:{bg:"bg-gray-500",text:"text-gray-500",shadow:"shadow-gray-200",border:"border-gray-500"}};function w(t){return t.pos==="noun"?g[t.gender]??g.default:t.pos==="verb"?g.action:g.default}function V({grammar:t}){const s=w(t);return e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:`h-4 w-1 rounded-full ${s.bg}`}),e.jsx("div",{className:"flex gap-2 text-[clamp(0.6rem,1vw,0.7rem)] font-black tracking-widest uppercase",children:e.jsx(U,{grammar:t})})]})}function p({className:t="",children:s,variant:n,icon:r,...l}){let i="";return n==="primary"?i="bg-primary text-white hover:brightness-90":i="",r&&(t+=" inline-flex items-center"),e.jsxs("button",{...l,className:`rounded-md font-semibold transition-all active:scale-95 shadow-sm ${t} ${i}`,children:[r&&e.jsx("span",{className:"mr-2 inline-flex",children:r}),s]})}function q({url:t,className:s}){const[n,r]=x.useState(!1),{t:l}=f();if(!t)return null;const i=a=>{a.preventDefault(),a.stopPropagation();const o=new Audio(t);r(!0),o.play(),o.onended=()=>r(!1),o.onerror=()=>r(!1)};return e.jsx("button",{onClick:i,className:`p-2 rounded-full transition-colors ${s||""} ${n?"text-sky-500 bg-sky-50":"text-slate-400 hover:text-sky-600 hover:bg-slate-100"}`,title:l("learning.audioTitle"),children:n?e.jsx($,{className:"w-6 h-6"}):e.jsx(I,{className:"w-6 h-6"})})}function G({entry:t,onShowTranslation:s}){const{t:n}=f(),{content:r,grammar:l,example:i,audio_url:a}=t,o=w(l);return e.jsxs("div",{className:`h-full flex flex-col backface-hidden p-4 rotate-x-0 shadow-md ${o.shadow}`,children:[e.jsx(V,{grammar:l}),e.jsx("div",{className:"uppercase text-4xl md:text-5xl font-extrabold text-ink text-center",children:r}),e.jsx("div",{className:"flex-grow flex justify-center items-center",children:e.jsx("p",{className:"font-serif text-lg md:text-xl italic text-ink-light leading-relaxed",children:i})}),e.jsx("div",{className:"h-10 flex justify-center flex-none",children:a&&e.jsx(q,{url:a})}),e.jsx(p,{variant:"primary",className:"py-2 w-8/9 mx-auto block mt-8",onClick:s,children:n("learning.showTranslation")})]})}function Y({entry:t}){const{content:s,meanings:n,grammar:r}=t,l=w(r);return e.jsxs("div",{className:`absolute inset-0 flex flex-col backface-hidden p-4 rotate-x-180 shadow-md ${l.shadow}`,children:[e.jsx("div",{className:"uppercase text-3xl md:text-4xl font-extrabold text-ink text-center mb-4 md:mb-6",children:s}),e.jsx("div",{className:"space-y-4 flex-grow overflow-y-auto pr-3",children:n.map((i,a)=>e.jsxs("div",{className:`border-l-4 pl-4 py-1 transition-all hover:translate-x-1 ${l.border}`,children:[e.jsx("p",{className:"text-lg md:text-xl font-bold leading-tight",children:i.val}),e.jsx("p",{className:"text-sm text-slate-500 italic mt-1",children:i.context})]},a))})]})}function H({entry:t}){const[s,n]=x.useState(!1);return e.jsx("article",{className:"w-full max-w-md min-h-[280px] md:min-h-[320px] perspective-distant",children:e.jsxs(y,{className:`relative transform-3d transition-transform duration-700 w-full h-full ${s?"rotate-x-180":""}`,children:[e.jsx(G,{entry:t,onShowTranslation:()=>n(!0)}),e.jsx(Y,{entry:t})]})})}function X({entry:t,onAnswer:s}){const{t:n}=f();return e.jsxs(e.Fragment,{children:[e.jsx(H,{entry:t},t.id),e.jsxs("div",{className:"grid grid-flow-col auto-cols-fr gap-4 mt-6 md:mt-8 text-xs md:text-sm",children:[e.jsx(p,{className:"bg-white border-1 border-red-100 hover:bg-red-50 text-red-600 transition-all active:scale-95 px-4 py-2",onClick:()=>s(t.id,"unknown"),icon:e.jsx(b,{}),children:n("learning.unknownButton")}),e.jsx(p,{className:"bg-white border-1 border-orange-100 hover:bg-orange-50 text-orange-600 transition-all active:scale-95 px-4 py-2",onClick:()=>s(t.id,"hard"),icon:e.jsx(v,{}),children:n("learning.hardButton")}),e.jsx(p,{className:"bg-white border-1 border-green-100 hover:bg-green-50 text-green-600 transition-all active:scale-95 px-4 py-2",onClick:()=>s(t.id,"know"),icon:e.jsx(F,{}),children:n("learning.knownButton")})]})]})}function J({value:t,max:s,className:n=""}){const r=t/s*100,l=`hsl(${100+r*.4}, 70%, 50%)`;return e.jsx("div",{className:`h-3 bg-gray-200 rounded-full overflow-hidden shadow-sm ${n}`,children:e.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{width:`${r}%`,backgroundColor:l}})})}function K({children:t,onClose:s,type:n="error"}){x.useEffect(()=>{const l=setTimeout(s,5e3);return()=>clearTimeout(l)},[s]);const r=n==="error"?"bg-red-600":"bg-green-600";return e.jsxs("div",{className:`absolute top-4 left-1/2 -translate-x-1/2 z-50 ${r} text-white px-4 py-3 rounded-lg shadow-2xl flex items-center justify-between min-w-[280px]`,children:[e.jsx("div",{className:"flex-grow text-sm font-medium",children:t}),e.jsx("button",{onClick:s,className:"ml-3 p-1 hover:bg-black/10 rounded-full transition-colors","aria-label":"Close",children:e.jsx(b,{size:18})})]})}const Q=x.lazy(()=>z(()=>import("./SessionSummary-vv0fqkLt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Z=(t,s)=>{if(s.type==="ANSWER"){const{answer:n,isLast:r}=s.payload;return{...t,[n]:t[n]+1,completed:r,currentIndex:r?t.currentIndex:t.currentIndex+1}}else return t};function ee({words:t}){const{error:s,setError:n,submitRating:r}=M(),{t:l}=f(),i=E(),[a,o]=x.useReducer(Z,{know:0,hard:0,unknown:0,currentIndex:0,completed:!1}),d=t.length,c=async(u,m)=>{r(u,m,()=>{o({type:"ANSWER",payload:{answer:m,isLast:a.currentIndex+1>=d}})})};return e.jsxs("div",{className:"relative flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 md:p-4",children:[e.jsx(R,{to:"/dashboard",className:"no-underline hover:underline",children:l("learning.finishButton")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(J,{value:a.currentIndex+1,max:d,className:"w-24 md:w-40"}),a.completed?e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[d," / ",d]}):e.jsxs("span",{children:[a.currentIndex+1," / ",d]})]})]}),e.jsx("div",{className:"flex-grow flex flex-col justify-center items-center",children:a.completed?e.jsx(x.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Q,{total:d,results:a,onRepeat:()=>{},onExit:()=>i("/dashboard")})}):e.jsx(X,{entry:t[a.currentIndex],onAnswer:c})}),s&&e.jsx(K,{onClose:()=>n(null),children:s})]})}function te(){const{t}=f();return e.jsx(_,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center h-full gap-6",children:[e.jsx("div",{className:"mb-4 p-4 bg-orange-50 rounded-full",children:e.jsx(v,{className:"text-5xl text-orange-500"})}),e.jsx("p",{className:"text-lg",children:t("learning.loadError.message")}),e.jsx(p,{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-white text-primary hover:brightness-90",icon:e.jsx(A,{}),children:t("learning.loadError.retryButton")})]})})})}async function ie(){const t=B(T);return t||C("/dashboard"),{words:t}}const ce=S(function({loaderData:s}){const{t:n}=f();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:n("learning.meta.title")}),e.jsx("meta",{name:"description",content:n("learning.meta.description")}),e.jsx("meta",{name:"keywords",content:n("learning.meta.keywords")}),e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"h-full flex justify-center items-center",children:"Loading..."}),children:e.jsx(L,{resolve:s.words,errorElement:e.jsx(te,{}),children:r=>e.jsx(ee,{words:r})})})]})});export{p as B,ie as c,ce as l};
